function t(){var t=new Phaser.Game(300,420,Phaser.Canvas,"game_cont");t.state.add("Boot",o),t.state.add("Preload",_),t.state.add("Game",g),t.state.start("Boot")}function e(t,e,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var o="expires="+a.toUTCString();document.cookie=t+"="+e+"; "+o}function n(t){for(var e=t+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}function a(t,e){var n=t.length;if(n){for(;n>e;)t[e++]=t[e];--t.length}}var o=function(){this.init=function(){this.input.maxPointers=1,this.stage.disableVisibilityChange=!0},this.preload=function(){this.load.atlas("preloader","res/preloader.png","res/preloader.json")},this.create=function(){this.stage.backgroundColor="#2c3e50",this.fontLoad=this.add.text(this.world.centerX,this.world.centerY," a ",{font:"200px",fill:"#ecf0f1"}),this.fontLoad.visible=!1,this.fontLoad.font="exo",this.state.start("Preload")}},i={group_1:["0x3498db","0x1abc9c","0x2ecc71"],group_1_hard:["0x3498db","0x1abc9c","0x2ecc71","0x2980b9","0x16a085","0x27ae60"],group_2:["0xf1c40f","0xe67e22","0xe74c3c"],group_2_hard:["0xf1c40f","0xe67e22","0xe74c3c","0xf39c12","0xd35400","0xc0392b"]},r={0:{x:10,y:130},1:{x:105,y:130},2:{x:200,y:130},3:{x:10,y:225},4:{x:105,y:225},5:{x:200,y:225},6:{x:10,y:320},7:{x:105,y:320},8:{x:200,y:320}},d=null,l=0,s=0,c="",h="",f=null,u=null,x=2500,p=null,g=function(t){this.init=function(e){this.config=e;var a=n("ColorMatch_BestScore");""!=a&&(s=a),t.renderer.renderSession.roundPixels=!0},this.create=function(){c=this.add.text(this.world.width-25,25,"0 ",{font:"24px",fill:"#ecf0f1"}),c.font="exo",c.anchor.setTo(.5),h=this.add.text(25,25,s+" ",{font:"24px",fill:"#ecf0f1"}),h.font="exo",h.anchor.setTo(.5),d=this.add.group(),M(t)}},m=function(t,e,n,a,o){var i=t.add.graphics(0,0);i.beginFill(e),i.drawRect(0,0,90,90),i.endFill();var r=t.add.sprite(n,a,null);r.inputEnabled=!0,r.addChild(i),i=null,o?r.isPoint=!0:r.isPoint=!1,r.events.onInputDown.add(function(e){b(e,t)}),d.add(r),r=null},v=function(t,e){f=t.add.graphics(10,60),f.beginFill(e),f.drawRect(0,0,280,30),f.endFill();var n=35>l?x-50*l:1e3;u=t.add.graphics(10,95),u.beginFill(15528177),u.drawRect(0,0,280,10),u.endFill(),timeBarMask=t.add.graphics(280,95),timeBarMask.beginFill(2899536),timeBarMask.drawRect(0,0,280,10),timeBarMask.endFill(),t.time.events.add(1,function(){p=t.add.tween(timeBarMask),p.to({x:10},n,"Linear",!0),p.onComplete.addOnce(function(){timeBarMask.kill(),y(),w(t)},this)},this)},M=function(t){var e=[0,1,2,3,4,5,6,7,8],n=Math.floor(9*Math.random()),o="group_"+(Math.floor(2*Math.random())+1),d=20>l?o:o+"_hard",s=i[d].slice(),c=20>l?3:6,h=Math.floor(Math.random()*c),f=s[h];v(t,f),m(t,f,r[e[n]].x,r[e[n]].y,!0),a(e,n),a(s,h);var u=7>=l?l:8,x=0;for(x=0;u>x;x++)n=Math.floor(Math.random()*(8-x)),h=Math.floor(Math.random()*(c-1)),f=s[h],m(t,f,r[e[n]].x,r[e[n]].y),a(e,n);e=null,s=null},b=function(t,e){t.isPoint?l++:y(),c.text=l.toString(),w(e)},w=function(t){t.tweens.removeAll(),d.removeAll(),f.kill(),u.kill(),M(t)},y=function(){l>s&&(s=l,h.text=s.toString(),e("ColorMatch_BestScore",s,7)),l=0,c.text="0"},k=null,C=!0,_=function(){this.preload=function(){k=this.add.sprite(this.world.centerX,this.world.centerY,"preloader",0),k.anchor.set(.5,.5);var t=[],e=0;for(e;33>e;e++)t[e]=e;k.animations.add("loading",t,60,!0),k.play("loading"),this.load.onLoadComplete.addOnce(this.onLoadComplete,this)},this.create=function(){k.cropEnabled=!1},this.update=function(){C&&this.state.start("Game")},this.onLoadComplete=function(){C=!0}};"complete"===document.readyState||"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t,!1);